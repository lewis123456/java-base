《深入理解Java虚拟机——Java高级特性与最佳实践》

Java运行时数据区域
线程私有：程序计数器，虚拟机栈，本地方法栈
线程公有：堆，方法区，执行引擎，本地方法接口，本地方法库

虚拟机栈：为虚拟机执行java方法，局部变量表，可能会抛出StackOverfloweError，OutOfMemoryError
本地方法栈：使虚拟机使用Native方法服务
java堆：虚拟机启动时创建，分代收集算法，eden, from survivor, to survivor，逻辑连续

方法区：类信息，常量，静态变量，即时编译后的代码，永久代，运行时常量池，String的intern方法

由String的intern方法而引申的
1 通过字面值赋值给字符串时，会先判断该字面值是否在常量池中，如果在就返回常量池中该字面值的引用，
否则先在常量池中添加该字符串然后返回引用
2 String的intern方法相当于返回字符串在常量池中的引用，如果之前不存在则添加，存在则直接返回
3 new String都是在堆上创建
4 常量字符串的+在编译阶段会被合成为一个字符串
5 对于final字段，在编译阶段就进行了常量替换
6 常量字符串和变量拼接时，会调用StringBuilder.append()在堆上创建新变量
7 JDK 1.7后，intern方法还是会先去查询常量池中是否有已经存在，如果存在，则返回常量池中的引用，
这一点与之前没有区别，区别在于，如果在常量池找不到对应的字符串，则不会再将字符串拷贝到常量池，
而只是在常量池中生成一个对原字符串的引用。简单的说，就是往常量池放的东西变了：原来在常量池中找不到时，
复制一个副本放到常量池，1.7后则是将在堆上的地址引用复制到常量池。

